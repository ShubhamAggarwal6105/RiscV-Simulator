# RISC-V Five-Step Instruction Execution Model & Assembler

This project implements a **32-bit RISC-V assembler** and a **hardware simulator** that models a five-step instruction execution pipeline. The simulator reads the machine code generated by the assembler from `output.mc` and simulates the pipelined execution of RISC-V instructions. Simulation outputs are written to files (`data_out.mem`, `reg_out.mem`, `cycle_log.txt`), and a graphical user interface (GUI) is provided to enhance user interaction and visualization.

---

## Table of Contents
 
- [Project Overview](#project-overview)
- [Features](#features)
- [Input & Output File Formats](#input--output-file-formats)
- [Instruction Set Support](#instruction-set-support)
- [Project Structure](#project-structure)
- [How to Build and Run](#how-to-build-and-run)
- [Implementation Details](#implementation-details)
- [Contributions](#contributions)
- [Screenshots](#screenshots)

---

## Project Overview

This project is divided into two main parts:

1. **Assembler:**  
   - Reads an assembly file (`input.asm`) containing RISC-V instructions and assembler directives.
   - Generates a symbol table mapping labels to addresses.
   - Converts the assembly code into binary machine code, saved in `output.mc`.

2. **Five-Step Instruction Execution Simulator:**  
   - Reads the machine code from `output.mc`.
   - Models the pipelined execution of instructions through five stages:
     - **IF (Instruction Fetch)**
     - **ID (Instruction Decode)**
     - **EX (Execute)**
     - **MEM (Memory Access)**
     - **WB (Write Back)**
   - Outputs simulation results into:
     - `data_out.mem` (Memory contents)
     - `reg_out.mem` (Register contents)
     - `cycle_log.txt` (Cycle-by-cycle execution logs)
   - Emulates behavior similar to the Venus simulator with support for a limited set of RISC-V instructions and assembler directives.

---

## Features

- **Assembly to Machine Code Conversion:**  
  Converts RISC-V assembly instructions to binary machine code.

- **Symbol Table Generation:**  
  Automatically resolves labels and assigns corresponding addresses.

- **Support for RISC-V 32-bit Instructions:**  
  Implements 31 instructions across various instruction formats.

- **Assembler Directives Support:**  
  Handles `.text`, `.data`, `.byte`, `.half`, `.word`, `.dword`, and `.asciz`.

- **Memory Segmentation:**  
  - **Code:** Starts at `0x00000000`
  - **Data:** Starts at `0x10000000`
  - **Heap:** Starts at `0x10008000`
  - **Stack:** Starts at `0x7FFFFFFC`

- **Five-Step Pipeline Simulation:**  
  Models the following stages:
  - **IF (Instruction Fetch)**
  - **ID (Instruction Decode)**
  - **EX (Execute)**
  - **MEM (Memory Access)**
  - **WB (Write Back)**

- **Graphical User Interface (GUI):**  
  An interactive interface for running the simulator, visualizing the pipeline stages, registers, and memory.  
  **GUI Execution:**  
  Navigate to the `GUI_Exe` directory and run the main file:
  ```sh
  ./RiscVSim.exe
  ```

---

## Project Structure

- **README.md:**  
  This file.

- **Source Code Files:**
  - `assembler.cpp`: Implements the assembler (assembly parsing, symbol table construction, and machine code generation).
  - `simulator.cpp`: Implements the five-step instruction execution model, handling pipeline simulation and I/O.
  
- **Executables:**
  - `assembler.exe`: Assembler executable.
  - `simulator.exe`: Simulator executable.
  
- **Output Files:**
  - `output.mc`: Generated machine code.
  - `data_out.mem`: Memory content output from the simulator.
  - `reg_out.mem`: Register content output.
  - `cycle_log.txt`: Logs simulation cycles and pipeline activity.
  
- **Input File:**
  - `input.asm`: Assembly file containing the program.
  
- **GUI Components:**
  - **GUI_Code:** Contains the source code for the GUI.
  - **GUI_Exe:** Contains the precompiled GUI executable.
    - **Main File:** `RiscVSim.exe`

---

## How to Build and Run

### Assembler & Simulator (CLI)

1. **Compilation:**
   Compile the source files using a C++ compiler:
   ```sh
   g++ -o assembler assembler.cpp
   g++ -o simulator simulator.cpp
   ```

2. **Running the Assembler:**
   ```sh
   ./assembler
   ```

3. **Running the Simulator:**
   ```sh
   ./simulator
   ```

### Graphical User Interface (GUI)

The GUI provides an intuitive way to interact with the simulator. It displays the five pipeline stages, register contents, memory, and cycle logs in real time.

1. **Navigate to the GUI Directory:**
   ```sh
   cd GUI_Exe
   ```

2. **Run the GUI Executable:**
   ```sh
   ./RiscVSim.exe
   ```

---

## Implementation Details

### Pass 1: Symbol Table Construction

- **Label Identification:**  
  Scans the assembly file to identify labels and determine their corresponding addresses.
  
- **Data Segment Allocation:**  
  Allocates memory space for the `.data` segment based on assembler directives (e.g., `.byte`, `.word`).

- **Tokenization:**  
  Differentiates between code and data segments to generate appropriate tokens for further processing.

### Pass 2: Instruction Encoding

- **Machine Code Conversion:**  
  Converts parsed assembly instructions into binary machine code.
  
- **Label Resolution:**  
  Replaces label references with correct addresses, ensuring correct branch and jump targets.

### Five-Step Pipeline Simulation

- **Pipeline Stages:**  
  The simulator models each of the five stages:
  - **IF:** Fetches the instruction from memory.
  - **ID:** Decodes the instruction and reads the necessary registers.
  - **EX:** Executes the arithmetic/logical operation.
  - **MEM:** Accesses memory for load and store instructions.
  - **WB:** Writes results back to the register file.
  
- **Output Generation:**  
  Simulation results are output to `data_out.mem`, `reg_out.mem`, and `cycle_log.txt` for further analysis.

---

## Contributions

- **Shubham Aggarwal (2023CSB1162):**  
  - Project setup and integration.
  - Developed the assembler and contributed to machine code generation.
  - Assisted in integrating the GUI with the overall simulation framework.

- **Navneet Kaur (2023CSB1137):**  
  - Managed the data segment and assembly directive handling.
  - Implemented the code for simulator five-step cycle.

- **Yatri Sutariya (2023CSB1319):**  
  - Constructed the symbol table for assembler and contributed to debugging and optimization.
  - Integrated the individual cycle codes to run as a whole with input output functionalities.

---

## Screenshots

TO BE ADDED
"# assembler-phase3" 
